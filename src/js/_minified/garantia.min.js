var garantiasDocumentos={init:function(){this.formularioGarantia(),this.showAdjuntos()},showAdjuntos:function(){$("#garantia").on("click",".grupo-adjunto1",function(e){$("#form_archivo2").prop("disabled",!1)}),$("#garantia").on("click",".grupo-adjunto2",function(e){$("#form_archivo3").prop("disabled",!1)})},formularioGarantia:function(){const VTEXKEYS={"X-VTEX-API-AppKey":"vtexappkey-tuissarg-RSRUNA","X-VTEX-API-AppToken":"DRAHJNOACVXXTAZSSFZZYKVDNVBXGTWTMYITWADZGHWFCYMJKYJBRCSSWXTNLRTIZELUSFVSCATQOPBPISMHKUBJGPXZGPNPNNGXNSRFCRYQJBEGVEFTELYECBNCHWLN"};$("#garantia").on("submit",function(e){e.preventDefault();var datosToSave={apellidos:$(".input-regla_apellido").val(),descripcion:$(".input-numero_comentario").val(),email:$(".input-regla_mail").val(),nombre:$(".input-regla_nombre").val(),documento:$(".input-numero_documento").val(),telefono:$(".input-regla_telefono").val(),terminos:$(".input-regla_box").prop("checked"),tipodocumento:$(".input-regla_tipo_documento").val(),solicitud:$(".input-regla_tipo_solicitud").val(),item:$(".input-regla_pedido").val(),referencia:$(".input-regla_item").val(),adjuntofotos:$("#form_archivo1").val(),adjuntovideos:$("#form_archivo2").val(),adjuntoFotosVideos:$("#form_archivo3").val()};$.ajax({url:"/api/dataentities/GR/documents",headers:VTEXKEYS,data:JSON.stringify(datosToSave),contentType:"application/json; charset=utf-8",type:"POST",success:function(data){console.log("success");var file=jQuery("#garantia").find('input[name="archivo1"]').prop("files")[0],dataFile=new FormData;dataFile.append("adjuntofotos",file);var urlCOFile="/api/dataentities/GR/documents/"+data.DocumentId+"/adjuntofotos/attachments";console.log("data imagen",data.DocumentId,data);var file2=jQuery("#garantia").find('input[name="archivo2"]').prop("files")[0],dataFile2=new FormData;dataFile2.append("adjuntovideos",file2);var urlCOFile2="/api/dataentities/GR/documents/"+data.DocumentId+"/adjuntovideos/attachments",file3=jQuery("#garantia").find('input[name="archivo3"]').prop("files")[0],dataFile3=new FormData;dataFile3.append("adjuntoFotosVideos",file3);var urlCOFile3="/api/dataentities/GR/documents/"+data.DocumentId+"/adjuntoFotosVideos/attachments";$.ajax({data:dataFile,type:"POST",url:urlCOFile,headers:VTEXKEYS,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Uploaded! =D"),void 0!=file2?$.ajax({data:dataFile2,type:"POST",url:urlCOFile2,headers:VTEXKEYS,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Video Uploaded! =D"),void 0!=file3?$.ajax({data:dataFile3,type:"POST",url:urlCOFile3,headers:VTEXKEYS,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Archivo 3! =D"),$(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3)}}):($(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3))}}):($(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3))}})},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$(".mensaje").fadeIn(),"duplicated entry"==response.Message?$(".mensaje").empty().append("<p>ERROR DE FORMULARIO</p>"):$(".mensaje").empty().append("<p>Lo sentimos, ha ocurrido un error</p>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3)}}})})}};$(document).ready(function(){garantiasDocumentos.init()});