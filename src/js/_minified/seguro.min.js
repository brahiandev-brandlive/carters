var formularioSeguridades={init:function(){this.formularioSeguridad(),this.showAdjuntos()},showAdjuntos:function(){$("#seguridad").on("click",".grupo-adjunto1",function(e){$("#form_archivo2").prop("disabled",!1)}),$("#seguridad").on("click",".grupo-adjunto2",function(e){$("#form_archivo3").prop("disabled",!1)})},formularioSeguridad:function(){$("#seguridad").on("submit",function(e){e.preventDefault();var apellidos=$(".input-regla_apellido").val(),descripcion=$(".input-numero_comentario").val(),email=$(".input-regla_mail").val(),nombre=$(".input-regla_nombre").val(),documento=$(".input-numero_documento").val(),telefono=$(".input-regla_telefono").val(),terminos=$(".input-regla_box").prop("checked"),tipodocumento=$(".input-regla_tipo_documento").val(),solicitud=$(".input-regla_tipo_solicitud").val(),item=$(".input-regla_pedido").val(),refrencia=$(".input-regla_item").val(),grandeancho=$(".input-regla_grande_ancho").prop("checked"),grandealto=$(".input-regla_grande_alto").prop("checked"),cortoancho=$(".input-regla_corto_ancho").prop("checked"),cortoalto=$(".input-regla_corto_alto").prop("checked"),originalancho=$(".input-regla_original_ancho").val(),originalalto=$(".input-regla_original_alto").val(),datosToSave={apellidos:apellidos,descripcion:descripcion,email:email,nombre:nombre,documento:documento,telefono:telefono,terminos:terminos,tipodocumento:tipodocumento,solicitud:solicitud,item:item,referencia:refrencia,nuevasancho:$(".input-regla_nuevas_ancho").val(),nuevasalto:$(".input-regla_nuevas_alto").val(),originalalto:originalalto,originalancho:originalancho,masgrandedealto:grandealto,masgrandedeancho:grandeancho,cortodeancho:cortoancho,cortodealto:cortoalto,adjuntofotos:$("#form_archivo1").val(),adjuntovideos:$("#form_archivo2").val(),adjuntoFotosVideos:$("#form_archivo3").val()};$.ajax({url:"/api/dataentities/SR/documents",data:JSON.stringify(datosToSave),contentType:"application/json; charset=utf-8",type:"POST",success:function(data){console.log("success");var file=jQuery("#seguridad").find('input[name="archivo1"]').prop("files")[0],dataFile=new FormData;dataFile.append("adjuntofotos",file);var urlCOFile="/api/dataentities/SR/documents/"+data.DocumentId+"/adjuntofotos/attachments";console.log("data imagen",data.DocumentId,data);var file2=jQuery("#seguridad").find('input[name="archivo2"]').prop("files")[0],dataFile2=new FormData;dataFile2.append("adjuntovideos",file2);var urlCOFile2="/api/dataentities/SR/documents/"+data.DocumentId+"/adjuntovideos/attachments",file3=jQuery("#seguridad").find('input[name="archivo3"]').prop("files")[0],dataFile3=new FormData;dataFile3.append("adjuntoFotosVideos",file3);var urlCOFile3="/api/dataentities/SR/documents/"+data.DocumentId+"/adjuntoFotosVideos/attachments";$.ajax({data:dataFile,type:"POST",url:urlCOFile,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Uploaded! =D"),void 0!=file2?$.ajax({data:dataFile2,type:"POST",url:urlCOFile2,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Video Uploaded! =D"),void 0!=file3?$.ajax({data:dataFile3,type:"POST",url:urlCOFile3,cache:!1,enctype:"multipart/form-data",contentType:!1,processData:!1,success:function(data){console.log("File Archivo 3! =D"),$(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3)}}):($(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3))}}):($(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3))}})},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$(".mensaje").fadeIn(),"duplicated entry"==response.Message?$(".mensaje").empty().append("<p>ERROR DE FORMULARIO</p>"):$(".mensaje").empty().append("<p>Lo sentimos, ha ocurrido un error</p>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3)}}})})}};$(document).ready(function(){formularioSeguridades.init()});