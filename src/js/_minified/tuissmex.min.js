var configuracionesGenerales={init:function(){var width=screen.width;this.hiddenPrice(),this.goToHome(),this.saveDataNewsletter(),this.formularioContacto(),this.shareLinkPlp(),this.textureProduct(),this.carrusel(),this.openFAQ(),this.unidadMultiplicadora(),this.cantidadMinicart(),width<767&&(this.openMobileSearch(),this.openMobileFooter(),this.removeFixedHeader(),this.proomesas_sliders())},proomesas_sliders:function(){if($.fn.owlCarousel){var $showCaseOwl=$(".promesas_valor_mobile");$showCaseOwl.length&&$showCaseOwl.owlCarousel({items:4,autoPlay:!0,stopOnHover:!0,pagination:!1,itemsDesktop:[1199,5],itemsDesktopSmall:[980,5],itemsTablet:[768,3],itemsMobile:[479,1],navigation:!1})}},hiddenPrice:function(){document.querySelectorAll(".product-name-short").forEach(function(categoryMotorizada,index){categoryMotorizada.innerText.toLowerCase().includes("motorizadas")&&(categoryMotorizada.parentElement.parentElement.querySelector(".price").style.display="none")})},goToHome:function(){jQuery(window).load(function(){jQuery("#login-page .modal-header .vtexIdUI-close").on("click",function(){window.location="/"})})},cantidadMinicart:function(){vtexjs.checkout.getOrderForm().then(function(res){for(var acum=0,i=0;i<res.items.length;i++)console.log("Res",res.items[i]),res.items[i].productCategories[2]||(acum+=res.items[i].productCategories[16]?Number(res.items[i].quantity):Number(res.items[i].attachments[0].content.Cantidad));$(".btn-mini-cart .mini-cart-cantidad")[0].innerHTML=acum,$(".btn-mini-cart .mini-cart-cantidad")[1].innerHTML=acum})},stickyHeader:function(){var lastScrollTop;if(!(window.innerWidth<=991)){jQuery(document).ready(function(){jQuery(window).scrollTop()>90?(jQuery(".header-container").removeClass("sticky"),jQuery(".header-container").addClass("sticky")):jQuery(".header-container").removeClass("sticky")}),lastScrollTop=0,jQuery(window).scroll(function(event){var st=jQuery(this).scrollTop();st>90?(jQuery(".header-container").addClass("sticky"),st>lastScrollTop?jQuery("body").removeClass("scrollUp"):jQuery("body").addClass("scrollUp"),lastScrollTop=st):jQuery(".header-container").removeClass("sticky")})}},openMobileSearch:function(){$(".button-search").click(function(){$(".search").hasClass("activeSearch")?$(".search").removeClass("activeSearch"):$(".search").addClass("activeSearch")}),$(".container-close-search").click(function(){$(".search").removeClass("activeSearch")})},openMobileFooter:function(){$(".withdrop-item").on("click","h3",function(e){$(this).next("ul").toggle(),$("h3").hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")})},removeFixedHeader:function(){$(".button-menu-xs").on("click",".btn-open-menu-xs",function(e){e.preventDefault(),$(".page").addClass("visible-menu"),$(".header-container").css("position","initial")}),$(".container-close-menu").on("click",".close-menu",function(e){e.preventDefault(),$(".page").removeClass("visible-menu"),$(".header-container").css("position","fixed")})},saveDataNewsletter:function(){$("#isNewsletterOptIn").prop("checked",!0),$(".terms label").addClass("checked"),$("#isNewsletterOptIn").click(function(){var checked=$(this).prop("checked");console.log("check",checked),1==checked?$(".terms label").addClass("checked"):$(".terms label").removeClass("checked")}),$("#newsletter").on("submit",function(e){e.preventDefault();var email=$("#email").val();if(0==$("#isNewsletterOptIn").prop("checked"))$("#message").fadeIn(),$("#message").empty().append("<p>Debes aceptar la política de tratamiento de datos para continuar.</p>"),setTimeout(function(){$("#message").fadeOut()},5e3);else{var datosToSave={email:email,nombre:email};$.ajax({url:"/api/dataentities/MD/documents",data:JSON.stringify(datosToSave),contentType:"application/json; charset=utf-8",type:"POST",success:function(data){console.log("success"),$(".formulario").fadeOut(),$("#message").fadeIn(),$("#message").empty().append("<h3>¡GRACIAS POR SUSCRIBIRTE!</3>")},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#message").fadeIn(),"duplicated entry"==response.Message?$("#message").empty().append("<p>Ya te encuentras registrado.</p>"):$("#message").empty().append("<p>Lo sentimos, ha ocurrido un error, puede que ya estés registrado o inténtalo más tarde.</p>"),setTimeout(function(){$("#message").fadeOut()},5e3)}}})}})},shareLinkPlp:function(){for(var productitem=document.querySelectorAll(".productItem__image .share"),i=0;i<productitem.length;i++)productitem[i].addEventListener("click",function(e){e.target.parentElement.lastElementChild.classList.toggle("show")});var shareLinksA=$(".BtnShare a");$(shareLinksA).each(function(){sharehref=$(this).attr("href"),url=$(this)[0].parentElement.parentElement.parentElement.children[3].getAttribute("href"),toshareurl=sharehref+url,$(this).attr("href",toshareurl)}),$(".link").each(function(){$(this).on("click",function(){value=$(this).text();var $temp=$("<input>");$("body").append($temp),$temp.val(value).select(),document.execCommand("copy"),$temp.remove()})})},textureProduct:function(){$(".product-texture li").each(function(){$(this).length&&$(this).css("background","url("+$(this).text()+")")})},carrusel:function(){if($.fn.owlCarousel){var $showCaseOwl=$(".showcase-carrusel .prateleira > ul");$showCaseOwl.length&&($showCaseOwl.find(".helperComplement").remove(),$showCaseOwl.owlCarousel({items:5,autoPlay:!0,stopOnHover:!0,pagination:!0,itemsDesktop:[1199,5],itemsDesktopSmall:[980,5],itemsTablet:[768,3],itemsMobile:[479,2],navigation:!1}))}},formularioContacto:function(){$("#contactos").on("submit",function(e){e.preventDefault();var datosToSave={apellidos:$(".input-regla_apellido").val(),descripcion:$(".input-numero_comentario").val(),email:$(".input-regla_mail").val(),nombre:$(".input-regla_nombre").val(),telefono:$(".input-regla_telefono").val(),terminos:$(".input-regla_box").prop("checked"),tiposolicitud:$(".input-regla_tipo_solicitud").val()};$.ajax({url:"/api/dataentities/SD/documents",data:JSON.stringify(datosToSave),contentType:"application/json; charset=utf-8",type:"POST",success:function(data){console.log("success"),$("#contactos").hide(),$(".mensaje").fadeIn(),$(".mensaje").empty().append("<h3>¡Gracias por contactarnos!</3>"),setTimeout(function(){$(".mensaje").fadeOut(),location.reload(!0)},5e3)},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#contactos").hide(),$(".mensaje").fadeIn(),"duplicated entry"==response.Message?$(".mensaje").empty().append("<p>ERROR DE FORMULARIO</p>"):$(".mensaje").empty().append("<p>Lo sentimos, ha ocurrido un error</p>"),setTimeout(function(){$(".mensaje").fadeOut()},5e3)}}})})},formularioModalNewsletter:function(){$("#modal-tuiss").on("submit",function(e){e.preventDefault(),console.log("modal");var datosToModal={email:$("#modal-email").val(),nombre:$("#modal-name").val()};$.ajax({url:"/api/dataentities/MD/documents",data:JSON.stringify(datosToModal),contentType:"application/json; charset=utf-8",type:"POST",success:function(data){console.log("success"),$("#button-submit").fadeIn(),$("#button-submit").empty().append("<h3>¡GRACIAS!</3>"),setTimeout(function(){document.querySelector(".modal-subscribe").remove()},2e3)},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#button-submit").fadeIn(),"duplicated entry"==response.Message?$("#button-submit").empty().append("<p>ERROR</p>"):($("#button-submit").empty().append("<p>Lo sentimos</p>"),location.reload(!0)),setTimeout(function(){$("#button-submit").fadeOut()},2e3)}}})})},openFAQ:function(){$(".withdrop-item").on("click","h2",function(e){$(this).next("div").toggle(),$("h2").hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")})},currencyElement:function(value,decimals,separators){decimals=decimals>=0?parseInt(decimals,0):2,separators=separators||[".","'",","];var number=(parseFloat(value)||0).toFixed(decimals);if(number.length<=2+decimals)return number.replace(".",separators[separators.length-1]);for(var parts=number.split(/[-.]/),result=(value=parts[parts.length>1?parts.length-2:0]).substr(value.length-3,3)+(parts.length>1?separators[separators.length-1]+parts[parts.length-1]:""),start=value.length-6,idx=0;start>-3;)result=(start>0?value.substr(start,3):value.substr(0,3+start))+separators[idx]+result,idx=++idx%2,start-=3;return(3==parts.length?"-":"")+result},replaceDecimalsEl:function(priceString,elementsArray){if(priceString)for(var i=0,len=elementsArray.length;i<len;i++)elementsArray[i].innerHTML=priceString.replace(/\s/,"").replace(",00","")},unidadMultiplicadora:function(){var defaults={liSelector:".prateleira.vitrine ul li",liExclude:".prateleira.vitrine ul li.helperComplement",callbacks:{onResponse:null}};$.typeProducts=function(options){var settings;settings=$.extend({},defaults,options||{});!function(){var resultData=[],_productIdList=[];$.each($(settings.liSelector).not(settings.liExclude),function(e,element){var productId=$(element).find(".box-item").attr("data-idproduct"),already=$(element).data("already");productId&&!already&&-1===_productIdList.indexOf(productId)&&_productIdList.push(productId)});for(var ajaxUrl,skuParameters=$.map(_productIdList,function(productId){return"productId%3A"+productId}).join("%2C"),numberOfPages=Math.ceil(_productIdList.length/50),requestCounter=0,index=0;index<numberOfPages;index++)ajaxUrl="/api/catalog_system/pub/products/search?fq="+skuParameters+"&_from="+50*index+"&_to="+(50*(index+1)-1),$.ajax({url:ajaxUrl,async:!1}).done(function(data){var response;requestCounter++,resultData=resultData.concat(data),requestCounter===numberOfPages&&(response=resultData,document.querySelectorAll(".prateleira.vitrine ul li:not(.helperComplement)").forEach(elVitrine=>{var productId=elVitrine.querySelector(".box-item")?elVitrine.querySelector(".box-item").getAttribute("data-idproduct"):null;if(productId){var getProductInfo=response.filter(product=>product.productId==productId);if(1==getProductInfo.length){getProductInfo=getProductInfo[0];var promotionPercentage=elVitrine.querySelector(".flags__name-promotion .flag");if(promotionPercentage){var promotionPercentageVal=promotionPercentage.innerText.split("%")[0];elVitrine.querySelector(".flags__discount").innerHTML=promotionPercentageVal+"%",elVitrine.querySelector(".flags").classList.add("Show")}var t=getProductInfo.items[0].measurementUnit,priceElement=elVitrine.querySelector(".best-price span").innerHTML.toString().replace("$","").replace(".","").replace(",",".");if(priceElement=21*Number(priceElement)/100+Number(priceElement),"cm²"==t){elVitrine.querySelector(".typeProduct").innerHTML="m²",priceElement*=1e4;var precio=configuracionesGenerales.currencyElement(priceElement,0);configuracionesGenerales.replaceDecimalsEl("$"+precio,elVitrine.querySelectorAll(".best-price span"))}else precio=configuracionesGenerales.currencyElement(priceElement,0),configuracionesGenerales.replaceDecimalsEl("$"+precio,elVitrine.querySelectorAll(".best-price span"));if(elVitrine.querySelector(".old-price span")){var priceElementOld=elVitrine.querySelector(".old-price span").innerHTML.toString().replace("$","").replace(".","").replace(",",".");if(priceElementOld=21*Number(priceElementOld)/100+Number(priceElementOld),"cm²"==t){elVitrine.querySelector(".typeProduct").innerHTML="m²",priceElementOld*=1e4;var precioOld=configuracionesGenerales.currencyElement(priceElementOld,0);configuracionesGenerales.replaceDecimalsEl("$"+precioOld,elVitrine.querySelectorAll(".old-price span"))}else precioOld=configuracionesGenerales.currencyElement(priceElementOld,0),configuracionesGenerales.replaceDecimalsEl("$"+precioOld,elVitrine.querySelectorAll(".old-price span"));if(promotionPercentage&&promotionPercentageVal){var priceWithDiscount=configuracionesGenerales.currencyElement(priceElementOld-priceElementOld*promotionPercentageVal/100,0);configuracionesGenerales.replaceDecimalsEl("$"+priceWithDiscount,elVitrine.querySelectorAll(".best-price span"))}}}}}),document.querySelectorAll(".skeleton.skeleton-card-2").forEach(el=>{el.classList.remove("skeleton","skeleton-card-2")}))}).fail(function(){})}()},$.typeProducts()}};$(document).ready(function(){configuracionesGenerales.init()});