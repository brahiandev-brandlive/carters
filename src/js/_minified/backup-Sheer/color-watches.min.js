const{consoleLoggerLevel:consoleLoggerLevel}=require("vtex/lib/api/logger");jQuery(document).ready(function(){COLORSWATCHES.init()});var COLORSWATCHES={init:function(){jQuery(document).on("ajaxStop",function(){COLORSWATCHES.callVitrine()}),jQuery(window).load(function(){setTimeout(function(){COLORSWATCHES.callVitrine()},1e3)})},callVitrine:function(){$(".prateleira.vitrine ul li").not(".noStock").not(".product-field ul li").not(".product-variation li").not(".swatches-loaded").each(function(){_this=$(this),0!=$(this).find(".similar-colors-vitrine .product-variation li").length||$(this).hasClass("swatches-loaded")||COLORSWATCHES.getProductVariations(".prateleira.vitrine ul",_this),COLORSWATCHES.getRatingMasterData(".prateleira.vitrine ul",_this),_this.addClass("swatches-loaded")})},getProductVariations:function(vitrine_html_element,html_child_element){$(".prateleira.vitrine ul li.helperComplement").length>0&&$(".helperComplement").remove(),null==vitrine_html_element&&(vitrine_html_element=".vitrine"),null==html_child_element&&(html_child_element=".prateleira.vitrine > ul > li").not(".swatches-loaded"),$(vitrine_html_element).find(html_child_element).each(function(){if($(this).find(".similar-colors-vitrine").length>0)try{var $product_element_object,product_id;if(product_id=($product_element_object=$(this)).find("#productID-oculto").text(),product_sku=$product_element_object.find("#skuID-oculto").text(),$product_element_object.find("#linkID-oculto").text().replace("https://tuissco.myvtex.com/","").replace("https://tuissco.vtexlocal.com.br/","").replace("http://tuissco.vtexcommercestable.com.br/","")){var apiurlSimilares="/api/catalog_system/pub/products/crossselling/similars/"+product_id;$.ajax({url:apiurlSimilares,error:function(jqXHR,textStatus,errorThrown){},success:function(data,textStatus,jqXHR){if(data)for(s=0;s<data.length;s++){var product_similar=data[s].items[0].itemId;apiurl="/api/catalog_system/pub/products/search/?fq=skuId:"+product_similar,$.ajax({url:apiurl,error:function(jqXHR,textStatus,errorThrown){},success:function(data,textStatus,jqXHR){var $container_variation,before,sku,skus,linkVariation;if($product_element_object.addClass("swatches-loaded"),data.length>=1)if(null!=data[0].items&&void 0!=data[0].items&&data[0].items.length>0){skus=data[0].items,linkVariation=data[0].link;for(var count=0,i=0;i<skus.length;i++)if(count++,before=i-1,$container_variation=$product_element_object.find(".product-variation"),null!==skus[i].Color&&void 0!==skus[i].Color&&skus[i].Color.length>0&&skus[i].Color[0].length>0&&(0===i||skus[i].Color[0]!==skus[before].Color[0]&&$container_variation.find('li[data-sku-color="'+skus[i].Color[0]+'"]').length<1&&count<6)){sku=skus[i].itemId,color=skus[i].Color[0],$container_variation=$('<div class="product-variation"></div>'),0==jQuery($product_element_object).find(".product-variation").length&&jQuery($container_variation).appendTo($product_element_object.find(".similar-colors-vitrine"));$product_element_object.find("#skuID-oculto").parent().find(".product-variation")[0];var cuenta=jQuery($product_element_object).find(".product-variation li").length;cuenta<5&&(jQuery($product_element_object).find(".product-variation").append('<li id="variacao-item-'+sku+'" data-sku-color="'+color+'" data-sku-thumb='+prodvariation_img.replace(skus[i].images[0].imageId,skus[i].images[0].imageId+"-238-238")+" data-sku-thumb_atras="+prodvariation_img_atras.replace(skus[i].images[0].imageId,skus[i].images[0].imageId+"-238-238")+'> <a href="'+linkVariation+'"class="wrap-image" style="background-color:'+color+'"></a></li>'),$product_element_object.find(".productImage .imagen-prod > img").attr("src")),5==cuenta&&jQuery($product_element_object).find(".product-variation").append('<li> <div class="wrap-more"><a href="'+data[0].link+'"> + </a> </div> </li>'),$("li#variacao-item-"+sku).click(function(){$(".product-variation li").removeClass("selected"),$(this).addClass("selected");jQuery(this).attr("data-sku-color").replace('"',""),$product_element_object.find("#container-img .productImage").attr("href")})}}else console.log("No hay item")}})}}}),apiurl="/api/catalog_system/pub/products/search/?fq=productId:"+product_id,$.ajax({url:apiurl,error:function(jqXHR,textStatus,errorThrown){},success:function(data,textStatus,jqXHR){var $container_variation,before,sku,skus,linkVariation;if($product_element_object.addClass("swatches-loaded"),data.length>=1)if(null!=data[0].items&&void 0!=data[0].items&&data[0].items.length>0){skus=data[0].items,linkVariation=data[0].link;for(var count=0,i=0;i<skus.length;i++)if(count++,before=i-1,$container_variation=$product_element_object.find(".product-variation"),null!==skus[i].Color&&void 0!==skus[i].Color&&skus[i].Color.length>0&&skus[i].Color[0].length>0&&(0===i||skus[i].Color[0]!==skus[before].Color[0]&&$container_variation.find('li[data-sku-color="'+skus[i].Color[0]+'"]').length<1&&count<6)){if(sku=skus[i].itemId,color=skus[i].Color[0],prodvariation_img=skus[i].images[0].imageUrl,skus[i].images.length>1?prodvariation_img_atras=skus[i].images[1].imageUrl:prodvariation_img_atras="",color_img="/arquivos/"+color.replace(" ","").toLowerCase()+".jpg",""==prodvariation_img)return;$container_variation=$('<div class="product-variation"></div>'),0==jQuery($product_element_object).find(".product-variation").length&&jQuery($container_variation).appendTo($product_element_object.find(".similar-colors-vitrine")),jQuery($product_element_object).find(".product-variation").append('<li id="variacao-item-'+sku+'" data-sku-color="'+color+'" data-sku-thumb='+prodvariation_img.replace(skus[i].images[0].imageId,skus[i].images[0].imageId+"-238-238")+" data-sku-thumb_atras="+prodvariation_img_atras.replace(skus[i].images[0].imageId,skus[i].images[0].imageId+"-238-238")+'> <a href="'+linkVariation+'"class="wrap-image" style="background-color:'+color+'"></a></li>'),$product_element_object.find(".productImage .imagen-prod > img").attr("src"),$("li#variacao-item-"+sku).click(function(){$(".product-variation li").removeClass("selected"),$(this).addClass("selected");jQuery(this).attr("data-sku-color").replace('"',""),$product_element_object.find("#container-img .productImage").attr("href")})}}else console.log("No hay item")}})}}catch(error){console.error(error)}})},getRatingMasterData:function(vitrine_html_element,html_child_element){$(".prateleira.vitrine ul li.helperComplement").length>0&&$(".helperComplement").remove(),null==vitrine_html_element&&(vitrine_html_element=".vitrine"),null==html_child_element&&(html_child_element=".prateleira.vitrine > ul > li").not(".swatches-loaded"),$(vitrine_html_element).find(html_child_element).each(function(){var $product_element_object,productID;productID=($product_element_object=$(this)).find("#productID-oculto").text();var stars=[];$.ajax({url:"/api/dataentities/PA/search?_fields=assessment,productID,approved&productID=*"+productID+"*",type:"GET",success:function(data){data.length>0&&($.each(data,function(key,value){1==value.approved&&stars.push(value.assessment)}),stars.length>0&&setTimeout(function(){COLORSWATCHES.quantityStarsCategory(stars,$product_element_object)},200))},error:function(jqXHR,textStatus,errorThrown){datos=void 0},cache:!1})})},quantityStarsCategory:function(stars,element){element.find("#spnRatingProdutoCategory").text("("+stars.length+")");var values=stars,avg=values.reduce((previous,current)=>current+=previous)/values.length;element.find("#spnRatingProdutoCategory").addClass("stars"+Math.floor(avg)),element.find(".link-ancora").css("display","block")}};