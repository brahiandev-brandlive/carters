function noDocument(){if($(document).on("click","#no-document-key",function(a){a='<select id="selectNoDocument" name="documentselector">',a+='  <option selected value="Pasaporte">Pasaporte</option>',a+='\t <option value="cedula-extranjera">Cédula de extranjería</option>',a+="</select>",0==$("#selectNoDocument").length&&(clientProfileData.alternateDocumentType("Pasaporte"),$("#client-document-type").css("display","none"),$("#client-document-type").after(a))}),$("#client-document-type")&&0==$("#selectNoDocument").length){$("#client-document-type").css("display","none");var b=$("#client-document-type").val(),c="",d="";"Pasaporte"==b?c="selected":d="selected",b='<select id="selectNoDocument" name="documentselector">',b+="  <option "+c+' value="Pasaporte">Pasaporte</option>',b+="\t <option "+d+' value="cedula-extranjera">Cédula de extranjería</option>',b+="</select>",$("#client-document-type").after(b),clientProfileData.alternateDocumentType($("#client-document-type").val())}$("#selectNoDocument").change(function(){var a=$(this).val();"cedula-extranjera"==a&&(a="Cédula de extranjería"),clientProfileData.alternateDocumentType(a)})}var carritoCustom=function(){var config={nameAttachmentPropiedades:"propiedad",nameCategoriasNoVisibles:["Opcionales"],indexNameColor:"Color",selectorTabla:"table.cart-items tbody"},t=this;t.carritoLoad=!1,t.grupoCompletoItems=[];return t.reload=function(){t.carritoLoad=!1,t.iniciarAgrupacion(),t.quantityAction()},t.giftCard=function(){$(document).on("click",".link-gift-card",function(){var e=this;clearTimeout(self.currentGiftcardActivated),self.currentGiftcardActivated=setTimeout(function(){if(window.paymentData.showGiftCard()&&self.giftcardsActive)return $(e).removeClass("active"),$(".form-step.box-new.row-fluid").removeClass("giftcard in-use special-giftcard"),$(".gift-card-section").removeClass("active"),void(self.giftcardsActive=!1);if(self.giftcardsActive);else{if($(e).addClass("active"),$(".form-step.box-new.row-fluid").addClass("giftcard"),$(".gift-card-section").addClass("active"),paymentData.paymentGroups.giftCardPaymentGroup.showSpecialGiftCards()){$(".form-step.box-new.row-fluid").addClass("special-giftcard");var t=paymentData.paymentGroups.giftCardPaymentGroup.specialGiftCards();void 0!==t&t[0].inUse()?$(".gift-card-provider-group-descuento-por-fidelidad .gift-card-group").addClass("in-use-discount"):$(".gift-card-provider-group-descuento-por-fidelidad .gift-card-group").removeClass("in-use-discount")}self.giftcardsActive=!0}},100)}).on("click","#remove-gift-card",function(){self.giftcardsActive&&($(".link-gift-card").removeClass("active"),$(".form-step.box-new.row-fluid").removeClass("giftcard in-use special-giftcard"),$(".gift-card-section").removeClass("active"),self.giftcardsActive=!1,clearTimeout(self.currentGiftcardActivated))}),$(".gift-card-section").hasClass("active")},t.termConditions=function(){$('<p class="terms-conditions"><input type="checkbox" id="terms-conditions-check" name="terms-conditions-check"><span class="active" for="terms-conditions-check">Autorizo el tratamiento de mis datos personales de acuerdo a la <a href="/Politica-de-privacidad" target="_blank">Política de Privacidad</a> expuesta en el sitio.</span></p>').appendTo(".client-profile-data .form-step .box-client-info"),$("#terms-conditions-check").prop("checked",!0),$("#terms-conditions-check").click(function(){1==$(this).prop("checked")?$("#go-to-shipping").prop("disabled",!1):$("#go-to-shipping").prop("disabled",!0)}),$('<p class="terms-conditions"><input type="checkbox" id="terms-conditions-email-check" name="terms-conditions-email-check"><label class="active checked" for="terms-conditions-email-check">Autorizo el tratamiento de mis datos personales de acuerdo a la <a href="/Politica-de-privacidad" target="_blank">Política de Privacidad</a> expuesta en el sitio.</label></p>').appendTo(".pre-email .client-email"),$("#terms-conditions-email-check").prop("checked",!0),$("#terms-conditions-email-check").click(function(){1==$(this).prop("checked")?($("#btn-client-pre-email").prop("disabled",!1),$(".active").addClass("checked")):($("#btn-client-pre-email").prop("disabled",!0),$(".active").removeClass("checked"))})},t.iniciarAgrupacion=function(){vtexjs.checkout.getOrderForm().then(function(orderForm){t.ocultaItemsPorCategoria(orderForm.items);var ItemsAgrupados=t.agruparItemsOrder(orderForm.items);t.setVariableDataTR(orderForm.items,config.selectorTabla),t.itemsPropiedades(ItemsAgrupados),t.showMuestrasGratis(orderForm.items),orderForm.items.length>0&&(t.carritoLoad=!0)})},t.showMuestrasGratis=function(orderformItems){$.each(orderformItems,function(key,value){if("/16/"==value.productCategoryIds){$(document).find('tr[data-sku="'+value.id+'"] td[class="item-remove"]').css("display","table-cell");var producNameContenedorMuestra=$(document).find('tr[data-sku="'+value.id+'"] a[id="product-name'+value.id+'"]'),nameMuestra=producNameContenedorMuestra.text().split("-");producNameContenedorMuestra.text(""),producNameContenedorMuestra.append(nameMuestra[0]+'<div class="info-product">'+nameMuestra[1]+"</div>"),producNameContenedorMuestra.parent().after("<td></td>")}})},t.updateGrupoCompleto=function(){var orderForm=vtexjs.checkout.orderForm,ItemsAgrupados=t.agruparItemsOrder(orderForm.items);t.grupoCompletoItems=ItemsAgrupados},t.setVariableDataTR=function(items,selectorTabla){if("object"==typeof items){var _elementTableProduct=document.querySelector(selectorTabla);if(_elementTableProduct)for(var filasTabla=_elementTableProduct.children,contItemOrderform=0,i=0;i<filasTabla.length;i++)filasTabla[i].dataset.sku&&(items[contItemOrderform].attachments.length&&filasTabla[i].classList.add("id-"+items[contItemOrderform].attachments[0].content.ID),contItemOrderform++)}},t.itemsPropiedades=function(items){$.each(items,function(key,item){for(var infoCenefa,infoMotor,precioMotorFull,precioMotorDcto,precioCenefaFull,precioCenefaDcto,grupoItem=item.itemRelacion,opcionales=grupoItem.filter(function(item){return!!item.productCategories[2]}),contieneCenefa=!1,contieneMotor=!1,precioCenefa=0,precioMotor=0,precioSinDctoCenefa=0,precioSinDctoMotor=0,o=opcionales.length-1;o>=0;o--)opcionales[o].name.toLowerCase().includes("motor")&&(contieneMotor=!0,precioMotor=t.currencyElement(Number(21*opcionales[o].priceDefinition.total.toString().slice(0,-2))/100+Number(opcionales[o].priceDefinition.total.toString().slice(0,-2)),0),infoMotor=opcionales[o],precioSinDctoMotor=(precioMotorFull=opcionales[o].price)!=(precioMotorDcto=opcionales[o].sellingPrice)?t.currencyElement((Number(21*precioMotorFull.toString().slice(0,-2))/100+Number(precioMotorFull.toString().slice(0,-2)))*opcionales[o].quantity,0):precioMotor),opcionales[o].name.toLowerCase().includes("cenefa")&&(contieneCenefa=!0,precioCenefa=t.currencyElement(Number(21*opcionales[o].priceDefinition.total.toString().slice(0,-2))/100+Number(opcionales[o].priceDefinition.total.toString().slice(0,-2)),0),infoCenefa=opcionales[o],precioSinDctoCenefa=(precioCenefaFull=opcionales[o].price)!=(precioCenefaDcto=opcionales[o].sellingPrice)?t.currencyElement((Number(21*precioCenefaFull.toString().slice(0,-2))/100+Number(precioCenefaFull.toString().slice(0,-2)))*opcionales[o].quantity,0):precioCenefa);for(var i=grupoItem.length-1;i>=0;i--)if(!grupoItem[i].productCategories[2]){var itemsCompletos=t.buscarItems(grupoItem[i].productId),hexaPicker=t.colorPicker(grupoItem[i].id,itemsCompletos.items),cenefa='<div class="info-product-cenefa"> Cenefa: No </div>';contieneCenefa?cenefa='<div class="info-product-cenefa"> Cenefa: Si (+ $'+precioCenefa+") </div>":"/6/"==grupoItem[i].productCategoryIds&&(cenefa='<div class="info-product-cenefa" style="display:none"> Cenefa: No </div>');var motor='<div class="info-product-cenefa"> Motor: No </div>';contieneMotor&&(motor='<div class="info-product-cenefa"> Motor: Si (+ $'+precioMotor+") </div>");var ancho=grupoItem[i].attachments[0].content.Ancho,alto=grupoItem[i].attachments[0].content.Alto,medidas='<div class="info-product-ancho"> Medidas: '+ancho+"x"+alto+"cm</div>",color='<div class="info-product-color"> Color: <div class="info-product-color-picker" style="background:'+hexaPicker+'"></div>'+grupoItem[i].colorName+"</div>",ubicacionMando=grupoItem[i].attachments[0].content.Ubicacion_del_mando,ubicacionMandoCont='<div class="info-product-ubicacion"> Ubicación del mando: '+("DER"==ubicacionMando?"Derecha":"Izquierda")+"</div>";$('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID).length&&($('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' div[class="info-product"]').remove(),$('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' span[class="modificar-info"]').remove(),$('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="remove-all-group"]').remove(),$('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="choose-quantity-custom"]').remove());var producNameContenedor=$(document).find('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="product-name"]');producNameContenedor.append('<div class="info-product">'+medidas+color+cenefa+motor+ubicacionMandoCont+"</div>"),producNameContenedor.append('<span class="modificar-info"> MODIFICAR PRODUCTO </span>');var cantidad=Number(grupoItem[i].attachments[0].content.Cantidad);producNameContenedor.after('<td class="choose-quantity-custom"><div class="choose-quantity-container" id="choose-quantity-container"><input type="text" name="quantity" class="choose-qty pull-left" value="'+cantidad+'"><div class="choose-quantity-btn pull-left"><button class="btn choose-quantity-btn-mas" id="mas-'+i+'">+</button><button class="btn choose-quantity-btn-menos" id="menos-'+i+'">-</button></div></div></td>');var precioCortinaFull,precioCortinaDcto,precioSinDctoCortina,precioSinDctoTotal,precioCompleto=Number(precioCenefa.toString().replace(".","").replace("'",""))+Number(precioMotor.toString().replace(".","").replace("'",""))+(Number(21*grupoItem[i].priceDefinition.total.toString().slice(0,-2)/100)+Number(grupoItem[i].priceDefinition.total.toString().slice(0,-2))),contenedorPrecios=$(document).find('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="quantity-price"] span[class="total-selling-price"]');contenedorPrecios.html("$"+t.currencyElement(precioCompleto,0)),precioSinDctoCortina=(precioCortinaFull=grupoItem[i].price)!=(precioCortinaDcto=grupoItem[i].sellingPrice)?t.currencyElement((Number(precioCortinaFull/100*21)/100+Number(precioCortinaFull/100))*grupoItem[i].quantity,0):t.currencyElement(Number(21*grupoItem[i].priceDefinition.total.toString().slice(0,-2))/100+Number(grupoItem[i].priceDefinition.total.toString().slice(0,-2)),0),precioCortinaFull==precioCortinaDcto&&precioMotorFull==precioMotorDcto&&precioCenefaFull==precioCenefaDcto||(precioSinDctoTotal=t.currencyElement(Number(precioSinDctoCortina.toString().replace(".","").replace("'",""))+Number(precioSinDctoCenefa.toString().replace(".","").replace("'",""))+Number(precioSinDctoMotor.toString().replace(".","").replace("'","")),0),contenedorPrecios.before('<span class="total-fullprice"> $'+precioSinDctoTotal+"</span>")),console.log("Grupo Item Prueba",grupoItem[i]),$(document).find('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="quantity-price"]').after('<td class="remove-all-group"><div class="remove-all-group-btn"></div></td>');var btnRemove=$(document).find('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' td[class="remove-all-group"]');btnRemove.unbind(),btnRemove.click(function(){t.removeItems(grupoItem)});var instalacion=grupoItem[i].attachments[0].content.instalacion,btnModificar=$(document).find('tr[data-sku="'+grupoItem[i].id+'"].id-'+grupoItem[i].attachments[0].content.ID+' span[class="modificar-info"]'),id=grupoItem[i].id;btnModificar.unbind(),btnModificar.click(function(){t.pintarModificar(producNameContenedor,ancho,alto,instalacion,ubicacionMando,infoCenefa,infoMotor,id,itemsCompletos)})}}),"block"==$(".loader").css("display")&&$(".loader").fadeOut("slow"),t.grupoCompletoItems=items},t.guardarInfo=function(){$(document).on("click",".guardar-info",function(e){$(".loader").fadeIn("slow");var elementPadre=$(this).parents("tr.product-item"),sku=elementPadre[0].attributes[3].nodeValue,ancho=elementPadre.find('input[name="ancho-'+sku+'"]').val(),alto=elementPadre.find('input[name="alto-'+sku+'"]').val(),instalacion=elementPadre.find("input:radio[name=instalacion-"+sku+"]:checked").val(),mando=elementPadre.find("input:radio[name=ubicacion_del_mando-"+sku+"]:checked").val(),cantidad=elementPadre.find("input[name=quantity]").val(),IDgrupo=elementPadre.attr("class").split(" ").pop().replace("id-",""),id=vtexjs.checkout.orderForm.items.find(function(elem){return elem.id==sku}),refId=t.buscarItems(id.productId);t.getInfoVariacionProducto(refId,ancho,alto,instalacion,mando,cantidad,sku,IDgrupo,e)})},t.cambioColor=function(){$(document).on("click",".info-product-color-picker",function(){var elementPadre=$(this).parents(".modificar-producto");$(".info-product-color-picker.color-elegido").removeClass("color-elegido"),$(this).addClass("color-elegido");var skuColor=$(this).attr("data-sku");elementPadre.find(".guardar-info").attr("data-skuColor",skuColor)})},t.getInfoVariacionProducto=function(refProduct,ancho,alto,instalacion,mando,cantidad,sku,IDgrupo,element){var nuevoProducto=$(".guardar-info").attr("data-skuColor");refProduct.productId;t.multiplyUnits(refProduct,ancho,alto,instalacion,mando,cantidad,sku,IDgrupo,element)},t.multiplyUnits=async function(item,ancho,alto,instalacion,mando,cantidadAtt,skuActual,IDgrupo,element){var skuNuevo=element.target.dataset.skucolor,items=[],itemsRemove=[],itemsToUpdate=[],limites=t.buscaLimiteMedidas(item.limite);t.traerOpcionalesoColores(item.productId,"suggestions");var widthNumber=parseFloat(ancho.replace(",",".")),heightNumber=parseFloat(alto.replace(",","."));if(widthNumber>=limites.MinWidth&&widthNumber<=limites.MaxWidth)if($(".buy-error-info p, .buy-error-info img").remove(),heightNumber>=limites.MinHeight&&heightNumber<=limites.MaxHeight){$(".measures-sku-error-values p, .measures-sku-error-values img").remove();var cantidad=parseInt($(".choose-qty").val()),totalMedida=Math.round(widthNumber*heightNumber);if(totalMedida>1e4)var unidades=totalMedida*cantidad;else unidades=1e4*cantidad;var grupoCompleto=t.agruparTraerGrupoPorID(IDgrupo),nuevoAttachment={ID:grupoCompleto.idAttachment,Ancho:widthNumber,Alto:heightNumber,instalacion:instalacion,Ubicacion_del_mando:mando,Cantidad:cantidadAtt};if(await t.modificarAttachmentOpcionales(IDgrupo,nuevoAttachment)){var grupoCompletoAnterior=t.grupoCompletoItems.find(function(elem){return elem.idAttachment==IDgrupo});t.updateGrupoCompleto();var sku=(grupoCompleto=t.grupoCompletoItems.find(function(elem){return elem.idAttachment==IDgrupo})).itemRelacion.find(function(elem){return elem.id==skuActual}),altoAttachment=grupoCompletoAnterior.itemRelacion[0].attachments[0].content.Alto,anchoAttachment=grupoCompletoAnterior.itemRelacion[0].attachments[0].content.Ancho;if(altoAttachment!=heightNumber||anchoAttachment!=widthNumber){var index=vtexjs.checkout.orderForm.items.indexOf(sku),itemToUpdate={index:index,quantity:unidades};console.log("cambio",itemToUpdate),index>-1&&itemsToUpdate.push(itemToUpdate)}if(skuNuevo&&skuNuevo!=sku.id){var itemNuevo={id:skuNuevo,quantity:unidades,seller:"1"};items.push(itemNuevo),itemsRemove.push(sku)}var opcionales=$(element.target).parents(".modificar-producto").find(".opcionale");$.each(opcionales,function(key,value){var skuOpcional=$(value).attr("datasku"),yaExisteSku=grupoCompleto.itemRelacion.find(function(elem){return elem.id==skuOpcional}),unidadesCenefa=Math.round(widthNumber*cantidadAtt);if($(value).is(":checked"))if(yaExisteSku){if($(value).val().includes("cenefa")&&(altoAttachment!=heightNumber||anchoAttachment!=widthNumber)){var itemOpcionalToUpdate={index:vtexjs.checkout.orderForm.items.indexOf(yaExisteSku),quantity:unidadesCenefa};index>-1&&itemsToUpdate.push(itemOpcionalToUpdate)}}else if($(value).val().includes("motor")){var nuevoItem={id:skuOpcional,quantity:cantidadAtt,seller:"1"};items.push(nuevoItem)}else{nuevoItem={id:skuOpcional,quantity:unidadesCenefa,seller:"1"};items.push(nuevoItem)}else yaExisteSku&&itemsRemove.push(yaExisteSku)}),itemsToUpdate.length&&t.modificarOrder(itemsToUpdate),itemsRemove.length&&t.removeItems(itemsRemove),items.length&&t.AgregarOrder(items,nuevoAttachment)}}else $(".buy-error-info p, .buy-error-info img").remove(),$(".buy-error-info").append('<img src="/arquivos/error-measures-values.png" alt="Error de medidas"/><p>El tamaño de altura que ingresaste, elige un valor entre '+limites.MinHeight+" y "+limites.MaxHeight+"cm</p>"),$(".loader").fadeOut("slow");else $(".buy-error-info p, .buy-error-info img").remove(),$(".buy-error-info").append('<img src="/arquivos/error-measures-values.png" alt="Error de medidas"/><p>El tamaño de ancho que ingresaste no es válido, elige un valor entre '+limites.MinWidth+" y "+limites.MaxWidth+"cm</p>"),$(".loader").fadeOut("slow")},t.AgregarOrder=function(items,attachmentInfo){vtexjs.checkout.addToCart(items,null,1).then(function(orderForm){for(var itemsNuevos=[],i=0;i<orderForm.items.length;i++){if(orderForm.items[i].attachments.length<1)1==t.validAttachmentItem(orderForm.items[i],"propiedad")&&itemsNuevos.push({index:i,nameAttch:"propiedad",attachInfo:attachmentInfo})}t.addAttachmentItem(itemsNuevos)}).done(function(orderForm){}).fail(function(){})},t.validAttachmentItem=function(item,nameAttachment){for(var validateAttachment=!1,j=0;j<item.attachmentOfferings.length;j++)item.attachmentOfferings[j].name==nameAttachment&&(validateAttachment=!0);return validateAttachment},t.addAttachmentItem=function(arrayItems){for(var longitudItems=arrayItems.length,i=0;i<arrayItems.length;i++)i==longitudItems-1?vtexjs.checkout.addItemAttachment(arrayItems[i].index,arrayItems[i].nameAttch,arrayItems[i].attachInfo,null,!1).then(function(response){}):vtexjs.checkout.addItemAttachment(arrayItems[i].index,arrayItems[i].nameAttch,arrayItems[i].attachInfo,null,!1)},t.modificarOrder=function(grupoItem){grupoItem.length>0&&"object"==typeof grupoItem&&vtexjs.checkout.updateItems(grupoItem,null,!1).then(function(response){})},t.agruparTraerGrupoPorID=function(itemID){var itemsOrderform=vtexjs.checkout.orderForm.items,todosLosGrupos=t.agruparItemsOrder(itemsOrderform),producto=itemsOrderform.find(function(elem){return elem.attachments[0].content.ID==itemID});return todosLosGrupos.find(function(elem){return elem.idAttachment==producto.attachments[0].content.ID})},t.modificarAttachmentOpcionales=async function(itemID,contentAttachment){$(".loader").fadeIn("slow");for(var itemsOrderform=vtexjs.checkout.orderForm.items,grupoAttachmentSku=t.agruparTraerGrupoPorID(itemID),responseAttachment=[],i=grupoAttachmentSku.itemRelacion.length-1;i>=0;i--){const index=itemsOrderform.indexOf(grupoAttachmentSku.itemRelacion[i]);var resAtt=await vtexjs.checkout.addItemAttachment(index,"propiedad",contentAttachment,null,!1).then(function(res){return!0});responseAttachment.push(resAtt)}return responseAttachment.length>0},t.traerOpcionalesoColores=function(item,tipo){var opcionales;return $.ajax({type:"GET",url:"/api/catalog_system/pub/products/crossselling/"+tipo+"/"+item,dataType:"json",async:!1,success:function(dataValue){opcionales=dataValue},error:function(){alert("erro ao buscar objeto SKU")}}),opcionales},t.buscaLimiteMedidas=function(limite){var limiteWidth=limite[0].split("/")[0],limiteHeight=limite[0].split("/")[1];return{MinWidth:parseFloat(limiteWidth.split(" ")[1]),MaxWidth:parseFloat(limiteWidth.split(" ")[5]),MinHeight:parseFloat(limiteHeight.split(" ")[2]),MaxHeight:parseFloat(limiteHeight.split(" ")[6])}},t.pintarModificar=function(productName,ancho,alto,instalacion,mando,cenefa,motor,i,items){productName.css("display","none");var htmlModificar="";htmlModificar+='<td class="modificar-producto" id="modificar-producto'+i+'">',htmlModificar+='<h2 class="nombre-producto">'+productName.children("a")[0].innerHTML+"</h2>",htmlModificar+='<div class="measures-sku">',htmlModificar+="<p>Medidas</p>",htmlModificar+='<div class="measures-sku-insert">',htmlModificar+='<input type="text" size="5" value="'+ancho+'" name="ancho-'+i+'" class="measures-sku-insert-values" maxlength="5" placeholder="Ancho">',htmlModificar+='<input type="text" size="5" value="'+alto+'" name="alto-'+i+'" class="measures-sku-insert-values" maxlength="5" placeholder="Alto">',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<div class="buy-error-info"></div>',htmlModificar+='<div class="instalacion-prod">',htmlModificar+="<p>La cortina será instalada en:</p>",htmlModificar+='<div class="instalacion-prod-opc">',htmlModificar+='<div class="instalacion-prod-opc-item">',htmlModificar+="<p>Por dentro del marco</p>",htmlModificar+='<input type="radio" class="radio-sku" data-value="DVP-'+i+'" value="DVP" name="instalacion-'+i+'" id="dentro-marco-'+i+'">',htmlModificar+='<label for="dentro-marco-'+i+'">DVP</label>',htmlModificar+="</div>",htmlModificar+='<div class="instalacion-prod-opc-item">',htmlModificar+="<p>Por fuera del marco</p>",htmlModificar+='<input type="radio" class="radio-sku" data-value="FVP-'+i+'" value="FVP" name="instalacion-'+i+'" id="fuera-marco-'+i+'">',htmlModificar+='<label for="fuera-marco-'+i+'">FVP</label>',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<div class="variacion-colores" id="variacion-colores-'+i+'">',htmlModificar+="<p>Color</p>",htmlModificar+='<div class="variacion-colores-contenedor">',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<div class="opcionales-prod motorizada">',htmlModificar+="<p>Motorizada</p>",htmlModificar+='<p class="price"><span class="price_best">No aplica</span></p>',htmlModificar+='<div class="opcionales-check">',htmlModificar+='<input type="checkbox" value="motor" data-value="motor-'+i+'" name="motor-'+i+'" data-sku="" class="radio-sku opcionale" id="motor-'+i+'">',htmlModificar+='<label for="motor-'+i+'">motor</label>',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<div class="opcionales-prod cenefa">',htmlModificar+="<p>Cenefa</p>",htmlModificar+='<p class="price"><span class="price_best">No aplica</span></p>',htmlModificar+='<div class="opcionales-check">',htmlModificar+='<input type="checkbox" value="cenefa" data-value="cenefa-'+i+'" datasku="" name="cenefa-'+i+'" class="radio-sku opcionale" id="cenefa-'+i+'" disabled>',htmlModificar+='<label for="cenefa-'+i+'">cenefa</label>',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<div class="ubicacion-mando">',htmlModificar+="<p>Ubicación del mando</p>",htmlModificar+='<div class="ubicacion-mando-opc">',htmlModificar+='<div class="ubicacion-mando-opc-item">',htmlModificar+="<p>Izquierdo</p>",htmlModificar+='<input type="radio" class="radio-sku" data-value="IZQ-'+i+'" value="IZQ" name="ubicacion_del_mando-'+i+'"  id="mando-izq-'+i+'"><label for="mando-izq-'+i+'">IZQ</label>',htmlModificar+="</div>",htmlModificar+='<div class="ubicacion-mando-opc-item">',htmlModificar+="<p>Derecho</p>",htmlModificar+='<input type="radio" class="radio-sku" data-value="DER-'+i+'" value="DER" name="ubicacion_del_mando-'+i+'" id="mando-der-'+i+'"><label for="mando-der-'+i+'">DER</label>',htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+="</div>",htmlModificar+='<span class="guardar-info" data-sku="'+i+'" data-skuColor="">GUARDAR</span>',htmlModificar+="</td>",productName.after(htmlModificar);for(var infoMotor,infoCenefa,traeOpcionales=t.traerOpcionalesoColores(items.productId,"suggestions"),o=traeOpcionales.length-1;o>=0;o--)traeOpcionales[o].items[0].name.toLowerCase().includes("motor")&&(infoMotor=traeOpcionales[o]),traeOpcionales[o].items[0].name.toLowerCase().includes("cenefa")&&(infoCenefa=traeOpcionales[o]);if($('[data-value="'+mando+"-"+i+'"]').prop("checked",!0),$('[data-value="'+instalacion+"-"+i+'"]').prop("checked",!0),cenefa){$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"]').css("display","flex"),$('[data-value="cenefa-'+i+'"]').prop("checked",!0),$('[data-value="cenefa-'+i+'"]').prop("disabled",!1),$('input[data-value="cenefa-'+i+'"]').attr("datasku",cenefa.id);var priceCenefaInc=cenefa.sellingPrice,priceCenefaIncList=cenefa.price;$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"] p[class="price"] span[class="price_best"]').html("$"+t.currencyElement(21*priceCenefaInc/100+priceCenefaInc,0)),priceCenefaInc!=priceCenefaIncList&&$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"] p[class="price"]').append('<span class="price_list">$'+t.currencyElement(21*priceCenefaIncList/100+priceCenefaIncList,0)+"</span>")}else if(infoCenefa){$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"]').css("display","flex"),$('input[data-value="cenefa-'+i+'"]').attr("datasku",infoCenefa.items[0].itemId),$('[data-value="cenefa-'+i+'"]').prop("disabled",!1);var priceCenefa=infoCenefa.items[0].sellers[0].commertialOffer.Price,priceCenefaList=infoCenefa.items[0].sellers[0].commertialOffer.ListPrice;$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"] p[class="price"] span[class="price_best"]').html("$"+t.currencyElement(100*(21*priceCenefa/100+priceCenefa).toString(),0)),priceCenefa!=priceCenefaList&&$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod cenefa"] p[class="price"]').append('<span class="price_list">$'+t.currencyElement(100*(21*priceCenefaList/100+priceCenefaList).toString(),0)+"</span>")}if(motor){$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"]').css("display","flex"),$('[data-value="motor-'+i+'"]').prop("checked",!0),$('input[data-value="motor-'+i+'"]').attr("datasku",motor.id),12==items.categoryId&&$('[data-value="motor-'+i+'"]').prop("disabled",!0);var priceMotorInc=motor.sellingPrice,priceMotorIncList=motor.price;$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"] p[class="price"] span[class="price_best"]').html("$"+t.currencyElement((21*priceMotorInc/100+priceMotorInc).toString().slice(0,-2),0)),priceMotorInc!=priceMotorIncList&&$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"] p[class="price"]').append('<span class="price_list">$'+t.currencyElement((21*priceMotorIncList/100+priceMotorIncList).toString().slice(0,-2),0)+"</span>")}else if(infoMotor){$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"]').css("display","flex"),$('input[data-value="motor-'+i+'"]').attr("datasku",infoMotor.items[0].itemId);var priceMotor=infoMotor.items[0].sellers[0].commertialOffer.Price,priceMotorList=infoMotor.items[0].sellers[0].commertialOffer.ListPrice;$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"] p[class="price"] span[class="price_best"]').html("$"+t.currencyElement((21*priceMotor/100+priceMotor).toString(),0)),priceMotor!=priceMotorList&&$('td[id="modificar-producto'+i+'"] div[class="opcionales-prod motorizada"] p[class="price"]').append('<span class="price_list">$'+t.currencyElement((21*priceMotorList/100+priceMotorList).toString(),0)+"</span>")}var color='<div class="info-product-color-picker color-elegido picker-'+i+'" style="background:'+t.colorPicker(i,items.items)+'" data-sku="'+i+'"></div>';$(document).find('div[id="variacion-colores-'+i+'"] div[class="variacion-colores-contenedor"]').append(color);for(var k=items.items.length-1;k>=0;k--){var colorBg=items.items[k].Color;if((colorBg[0].includes(".png")||colorBg[0].includes(".jpg"))&&(colorBg="url(",colorBg+="/arquivos/"+items.items[k].Color,colorBg+=")"),items.items[k].itemId!==i){var colorAdd='<div class="info-product-color-picker picker-'+items.items[k].itemId+'" data-sku="'+items.items[k].itemId+'" style="background:'+colorBg+'"></div>';$(document).find('div[id="variacion-colores-'+i+'"] div[class="variacion-colores-contenedor"]').append(colorAdd)}}t.cambioColor()},t.currencyElement=function(value,decimals,separators){decimals=decimals>=0?parseInt(decimals,0):2,separators=separators||[".","'",","];var number=(parseFloat(value)||0).toFixed(decimals);if(number.length<=2+decimals)return number.replace(".",separators[separators.length-1]);for(var parts=number.split(/[-.]/),result=(value=parts[parts.length>1?parts.length-2:0]).substr(value.length-3,3)+(parts.length>1?separators[separators.length-1]+parts[parts.length-1]:""),start=value.length-6,idx=0;start>-3;)result=(start>0?value.substr(start,3):value.substr(0,3+start))+separators[idx]+result,idx=++idx%2,start-=3;return(3==parts.length?"-":"")+result},t.replaceDecimalsEl=function(priceString,elementsArray){if(priceString)for(var i=0,len=elementsArray.length;i<len;i++)elementsArray[i].innerHTML=priceString.replace(/\s/,"").replace(",00","")},t.removeItems=function(grupoItem){for(var itemsToRemove=[],i=grupoItem.length-1;i>=0;i--){const item={index:vtexjs.checkout.orderForm.items.indexOf(grupoItem[i]),quantity:grupoItem[i].quantity};itemsToRemove.push(item)}vtexjs.checkout.removeItems(itemsToRemove).then(function(response){})},t.changeBtns=function(){var buyButton=$("#cart-to-orderform");buyButton.length>0&&(buyButton.appendTo(".summary-totalizers .accordion-inner"),$(".summary-totalizers .accordion-inner").append('<div class="returnTuBuy">  <a href="/">SEGUIR COMPRANDO</a></div>'))},t.modificarCantidades=async function(counterQty,skuItem,IDattach,gruposCompleto){var unidades,medidas,itemsToUpdate=[],grupoItem=gruposCompleto.find(function(elem){return elem.idAttachment==IDattach}),completoItem=grupoItem.itemRelacion.find(function(elem){return elem.id==skuItem}),nuevoAttachment={Cantidad:counterQty};await t.modificarAttachmentOpcionales(completoItem.attachments[0].content.ID,nuevoAttachment)&&(t.updateGrupoCompleto(),grupoItem=t.grupoCompletoItems.find(function(elem){return elem.idAttachment==IDattach}),$.each(grupoItem.itemRelacion,function(key,value){value.productCategories[2]?"un"==value.measurementUnit?unidades=counterQty:(medidas=Math.round(Number(value.attachments[0].content.Ancho)),unidades=medidas>100?medidas*counterQty:100*counterQty):"un"==value.measurementUnit?unidades=counterQty:(medidas=Math.round(Number(value.attachments[0].content.Ancho)*Number(value.attachments[0].content.Alto)),unidades=medidas>1e4?medidas*counterQty:1e4*counterQty);const indexItem=vtexjs.checkout.orderForm.items.indexOf(value),itemUpdate={index:indexItem,quantity:unidades};indexItem>-1&&itemsToUpdate.push(itemUpdate)}),t.modificarOrder(itemsToUpdate))},t.quantityAction=function(){var count=0;$(".choose-quantity-btn-mas").unbind(),$(document).on("click",".choose-quantity-btn-mas",function(e){if(e.preventDefault(),!(count>0)){count++;var counterQty=Number($(this).parents(".choose-quantity-container").children("input").attr("value"));counterQty+=1;var skuItem=$(this).parents(".product-item").attr("data-sku"),idItem=$(this).parents(".product-item").attr("class").split(" ").pop().replace("id-","");t.modificarCantidades(counterQty,skuItem,idItem,t.grupoCompletoItems),$(".loader").fadeIn("slow")}}),$(".choose-quantity-btn-menos").unbind(),$(document).on("click",".choose-quantity-btn-menos",function(e){if(e.preventDefault(),!(count>0)){count++;var counterQty=Number($(this).parents(".choose-quantity-container").children("input").attr("value"));counterQty<=1||(counterQty-=1);var skuItem=$(this).parents(".product-item").attr("data-sku"),idItem=$(this).parents(".product-item").attr("class").split(" ").pop().replace("id-","");t.modificarCantidades(counterQty,skuItem,idItem,t.grupoCompletoItems),$(".loader").fadeIn("slow")}})},t.buscarItems=function(itemDeGrupo){var todosItemsGrupo;return $.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+itemDeGrupo,dataType:"json",async:!1,success:function(dataValue){todosItemsGrupo=dataValue[0]},error:function(){alert("erro ao buscar objeto SKU")}}),todosItemsGrupo},t.colorPicker=function(itemColor,grupo){for(var hexadecimal,i=grupo.length-1;i>=0;i--){var colorItem=grupo.find(function(elem){return elem.itemId==itemColor});if(colorItem){((hexadecimal=colorItem.Color[0]).includes(".png")||hexadecimal.includes(".jpg"))&&(hexadecimal="url(",hexadecimal+="/arquivos/"+colorItem.Color[0],hexadecimal+=")");break}}return hexadecimal},t.agruparItemsOrder=function(items){for(var response=[],idsAttachment=t.obtenerIdAttachmentPropiedad(items),i=idsAttachment.length-1;i>=0;i--){var objetoItemAgrupado={idAttachment:idsAttachment[i],itemRelacion:[]};$.each(items,function(key,item){var attachmentPropiedad=item.attachments.find(function(elem){return elem.name==config.nameAttachmentPropiedades});attachmentPropiedad&&idsAttachment[i]==attachmentPropiedad.content.ID&&(item.colorName=t.getNameColor(item.name),objetoItemAgrupado.itemRelacion.push(item))}),response.push(objetoItemAgrupado)}return response},t.getNameColor=function(nameSku){var colorName=nameSku.substring(nameSku.indexOf(config.indexNameColor),nameSku.length).split(" ");return colorName[1]?colorName[1]:""},t.obtenerIdAttachmentPropiedad=function(items){var response=[];return $.each(items,function(key,item){var attachmentPropiedad=item.attachments.find(function(elem){return elem.name==config.nameAttachmentPropiedades});attachmentPropiedad&&(response.find(function(elem){return elem==attachmentPropiedad.content.ID})||response.push(attachmentPropiedad.content.ID))}),response},t.ocultaItemsPorCategoria=function(items){$.each(items,function(key,item){var validCategoriaOcultar=!1;$.each(item.productCategories,function(keyC,categoria){var conRelacionCategoria=config.nameCategoriasNoVisibles.find(function(elem){return elem==categoria});conRelacionCategoria&&conRelacionCategoria.length>0&&(validCategoriaOcultar=!0)}),validCategoriaOcultar&&$(document).find('tr[data-sku="'+item.id+'"]').fadeOut()})},$(window).load(function(){t.changeBtns(),t.iniciarAgrupacion(),t.guardarInfo(),t.termConditions(),t.quantityAction(),t.giftCard()}),t},generalCarrito=carritoCustom();$(document).ready(function(){noDocument()}),setInterval(function(){document.querySelector(".info-product")&&document.querySelector(".cart")?document.querySelector(".cart").style.display="block":document.querySelector(".cart")&&(document.querySelector(".cart").style.display="none",!0===generalCarrito.carritoLoad&&(generalCarrito.reload(),$(".loader").fadeIn("slow")))},500);