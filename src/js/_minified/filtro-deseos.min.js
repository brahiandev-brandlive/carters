function datos_ocultos(){document.getElementsByClassName("modal-deseos")[0].style.display="none",document.getElementById("editar-lista").style.display="none"}datos_ocultos(),vtexjs.checkout.getOrderForm().done(function(orderForm){if(orderForm.loggedIn)console.log("Usuario logueado: ",orderForm.clientProfileData.email);else{var sesion_login=document.getElementsByClassName("total_listas");console.log(sesion_login),sesion_login[0].innerHTML="<a href='login?ReturnUrl=favoritos'>Debes Iniciar Sesion Aqui.</a>"}});var EntradaListas_deseos={init:function(){screen.width;this.EntradaListas(),this.EnvioFormulario(),this.AcordeonDeseos(),this.deleteListas(),this.editarListas(),this.cambiarNombre()},EnvioFormulario:function(){vtexjs.checkout.getOrderForm().done(function(orderForm){orderForm.loggedIn&&$(".deseo_crear").on("click",function(c){document.getElementsByClassName("modal-deseos")[0].style.display="flex"})})},AcordeonDeseos:function(){},deleteListas:function(){vtexjs.checkout.getOrderForm().done(function(orderForm){document.getElementById("thank-you").style.display="none",$(".delete_lista").on("click",function(f){f.preventDefault(),id_lista=$(".lista_name").val(),email=orderForm.clientProfileData.email;var datosFav={email:email,nombre:nombre};$.ajax({url:"/api/dataentities/WH/documents/?_where=(idp="+id_lista+" AND email="+email+" AND activo=lista)",data:JSON.stringify(datosFav),contentType:"application/json; charset=utf-8",type:"DELETE",success:function(data){console.log("success");var input_deseo=document.getElementsByClassName("modal-deseos"),input_deseo2=document.getElementsByClassName("entrada_listas_datos");input_deseo[0].style.display="flex",input_deseo2[0].style.display="none",document.getElementById("thank-you").style.display="none",$("#titulo-deseos").fadeIn(),$("#titulo-deseos").empty().append('<img style="width:40px; height:40px;" src="/arquivos/exito-icon.png"></img><h3 style="font-size:12px">¡LISTA ELIMINADA CON ÉXITO!</3>'),setTimeout(function(){$("#titulo-deseos").fadeOut(),location.reload(!0)},5e3)},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#button-submit").fadeIn(),"duplicated entry"==response.Message?$("#button-submit").empty().append("<p>ERROR</p>"):$("#button-submit").empty().append("<p>Lo sentimos</p>"),setTimeout(function(){$("#button-submit").fadeOut()},1e3)}}})})})},cambiarNombre:function(){$(".edit_lista2").on("click",function(f){f.preventDefault()})},editarListas:function(){vtexjs.checkout.getOrderForm().done(function(orderForm){document.getElementById("thank-you").style.display="none",$(".edit_lista").on("click",function(f){f.preventDefault(),nombre_edit=$(".lista_name").val(),nombre3=$(".lista_name2").val().toUpperCase().split(" ").join("_"),console.log(nombre_edit,nombre3),email=orderForm.clientProfileData.email;var datosFav={idp:$(".lista_name").val(),sku:"NAN",email:email,nombre:nombre3,ruta:"NAN",imagen:"NAN",activo:"lista"};$.ajax({url:"/api/dataentities/WH/documents/?_where=(idp="+nombre_edit+" AND email="+email+" AND activo=lista)",data:JSON.stringify(datosFav),contentType:"application/json; charset=utf-8",type:"PUT",success:function(data6){console.log(data6),console.log("success");var input_deseo=document.getElementsByClassName("modal-deseos"),input_deseo2=document.getElementsByClassName("entrada_listas_datos");input_deseo[0].style.display="flex",input_deseo2[0].style.display="none",document.getElementById("thank-you").style.display="none",document.getElementById("editar-lista").style.display="none",document.getElementsByClassName("content-modal-deseos")[0].style.height="150px",$("#titulo-deseos").fadeIn(),$("#titulo-deseos").empty().append('<img style="width:40px; height:40px;" src="/arquivos/exito-icon.png"></img><h3 style="font-size:12px">¡LISTA EDITADA CON ÉXITO!</3>')},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#button-submit").fadeIn(),"duplicated entry"==response.Message?$("#button-submit").empty().append("<p>ERROR</p>"):$("#button-submit").empty().append("<p>Lo sentimos</p>"),setTimeout(function(){$("#button-submit").fadeOut()},1e3)}}}),id_lista=$(".lista_name").val(),email=orderForm.clientProfileData.email;datosFav={email:email,nombre:nombre};$.ajax({url:"/api/dataentities/WH/documents/?_where=(idp="+id_lista+" AND email="+email+" AND activo=lista)",data:JSON.stringify(datosFav),contentType:"application/json; charset=utf-8",type:"DELETE",success:function(data){console.log("success");var input_deseo=document.getElementsByClassName("modal-deseos"),input_deseo2=document.getElementsByClassName("entrada_listas_datos");input_deseo[0].style.display="flex",input_deseo2[0].style.display="none",document.getElementById("editar-lista").style.display="none",document.getElementsByClassName("content-modal-deseos")[0].style.height="150px",document.getElementById("thank-you").style.display="none",$("#titulo-deseos").fadeIn(),$("#titulo-deseos").empty().append('<img style="width:40px; height:40px;" src="/arquivos/exito-icon.png"></img><h3 style="font-size:12px">¡LISTA EDITADA CON ÉXITO!</3>'),setTimeout(function(){$("#titulo-deseos").fadeOut(),location.reload(!0)},5e3)},error:function(error){if(console.log(error.responseText),400==error.status){var response=JSON.parse(error.responseText);$("#button-submit").fadeIn(),"duplicated entry"==response.Message?$("#button-submit").empty().append("<p>ERROR</p>"):$("#button-submit").empty().append("<p>Lo sentimos</p>"),setTimeout(function(){$("#button-submit").fadeOut()},1e3)}}})})})},EntradaListas:function(){$(".hacer_lista").on("click",async function(c){c.preventDefault();const vtexOrder=await vtexjs.checkout.getOrderForm(),{clientProfileData:{email:email}}=vtexOrder,lista=$(".lista_name").val(),elementList=$(".lista_name"),elementParentList=$(".entrada_listas_datos"),searchUrl=`/api/dataentities/WH/search?_fields=activo,idp,imagen,nombre,ruta,sku&_where=(email=${email} AND activo="True" AND tipo=LIST AND nombre=${lista.replace(" ","_")})`,searchList=await fetch(searchUrl);if((await searchList.json()).length){document.querySelector("#titulo-deseos").innerHTML='<img src="/arquivos/mas-icon.png">LA LISTA YA EXISTE'}else{const data={idp:null,sku:null,email:email,nombre:elementList.val().toUpperCase().replace(" ","_"),ruta:null,imagen:null,activo:!0,lista:null,tipo:"LIST"};if(201!=(await fetch("/api/dataentities/WH/documents",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}})).status)return void console.error("Error in Creation of List");console.info("List Created"),elementParentList.hide(),$("#titulo-deseos").fadeIn(),$("#titulo-deseos").empty().append('<img style="width:40px; height:40px;" src="/arquivos/exito-icon.png"></img><h3 style="font-size:12px">¡AGREGADO CON ÉXITO!</3>'),setTimeout(function(){$("#titulo-deseos").fadeOut(),location.reload(!0)},1e4)}})}};$(document).ready(function(){EntradaListas_deseos.init()});